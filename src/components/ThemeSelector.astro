---
import BlockDebris from "./sprites/BlockDebris.astro";
import BreakableBlock from "./sprites/BreakableBlock.astro";
---

<section
	class="mt-6 flex justify-between font-bold text-2xl text-mario-sky-font"
>
	<h3>Select your theme!</h3>
	<div class="w-1/2 flex justify-evenly items-center">
		<label for="overworld" class="aspect-square w-11 relative">
			<input
				class="hidden peer"
				id="overworld"
				type="radio"
				name="theme"
				value="overworld"
				checked
			/>
			<div
				class="debris-container absolute w-11 h-11 peer-checked:[animation:_debris_1000ms_linear_1_forwards]"
			>
				<span
					class="debris hidden aspect-square w-4 absolute top-0 left-0 scale-x-[-1]"
				>
					<BlockDebris
						debrisColor="text-mario-ground&block-overworld-main"
						detailsColor="text-mario-ground&block-overworld-borders"
					/>
				</span>
				<span
					class="debris hidden aspect-square w-4 absolute top-0 right-0 scale-x-[-1]"
				>
					<BlockDebris
						debrisColor="text-mario-ground&block-overworld-main"
						detailsColor="text-mario-ground&block-overworld-borders"
					/>
				</span>
				<span
					class="debris hidden aspect-square w-4 absolute bottom-0 left-0 scale-x-[-1]"
				>
					<BlockDebris
						debrisColor="text-mario-ground&block-overworld-main"
						detailsColor="text-mario-ground&block-overworld-borders"
					/>
				</span>
				<span
					class="debris hidden aspect-square w-4 absolute bottom-0 right-0 scale-x-[-1]"
				>
					<BlockDebris
						debrisColor="text-mario-ground&block-overworld-main"
						detailsColor="text-mario-ground&block-overworld-borders"
					/>
				</span>
			</div>
			<BreakableBlock
				bricksColor="text-mario-ground&block-overworld-main"
				bordersColor="text-mario-ground&block-overworld-borders"
				class="aboslute peer-checked:hidden"
			/>
		</label>
		<label for="underworld" class="aspect-square w-11 relative">
			<input
				id="underworld"
				type="radio"
				name="theme"
				value="underworld"
			/>
		</label>

		<label for="underwater" class="aspect-square w-11 relative">
			<input
				id="underwater"
				type="radio"
				name="theme"
				value="underwater"
			/>
		</label>

		<label for="castle" class="aspect-square w-11 relative">
			<input id="castle" type="radio" name="theme" value="castle" />
		</label>
	</div>
</section>

<style>
	#overworld:checked + .debris-container > .debris {
		display: block;
		animation: debris-parts 700ms linear infinite both;
	}

	@keyframes debris {
		/* Values depend on Label size (current w-11 = 2.75rem) */
		0% {
			width: 2.75rem;
			height: 2.75rem;
			left: 0;
		}

		20% {
			transform: translateY(-2rem);
		}

		98% {
			width: 11rem;
			height: 5.5rem;
			left: -4.125rem;
			transform: translateY(5rem);
			opacity: 1;
			visibility: visible;
		}

		99% {
			width: 11rem;
			height: 5.5rem;
			left: -4.125rem;
			transform: translateY(5rem);
			opacity: 0;
			visibility: hidden;
		}

		100% {
			opacity: 0;
			visibility: hidden;
		}
	}

	@keyframes debris-parts {
		/* Values depend on Label size (current w-11 = 2.75rem) */
		0% {
			transform: scaleX(-1);
		}

		49% {
			transform: scaleX(-1);
		}

		50% {
			transform: scaleX(1);
		}

		100% {
			transform: scaleX(1);
		}
	}
</style>
